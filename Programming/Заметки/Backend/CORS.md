## 1. Что это и зачем?

**CORS** (Cross-Origin Resource Sharing) — это механизм, который позволяет ограничить или разрешить доступ к ресурсам на сервере с других доменов (источников). Веб-браузеры по умолчанию блокируют такие запросы из соображений безопасности, но CORS позволяет настроить, какие источники могут обращаться к серверу.

Зачем использовать CORS?
- **Безопасность**: Ограничение доступа к ресурсам только для доверенных источников помогает предотвратить различные типы атак, такие как CSRF (Cross-Site Request Forgery).
- **Гибкость**: CORS позволяет настроить, какие именно HTTP-методы и заголовки могут быть использованы для запросов с других доменов.
- **Междоменное взаимодействие**: CORS необходим, когда ваш фронтенд и бэкенд расположены на разных доменах или портах, что обычно происходит в современных приложениях, когда фронтенд и бэкенд работают независимо друг от друга.

## 2. Подключение CORS

Чтобы настроить CORS в ASP.NET Core, необходимо добавить соответствующие политики в контейнер зависимостей и применить их в пайплайне обработки запросов.

Пример подключения CORS:

```csharp
builder.Services.AddCors(options =>
{
    options.AddPolicy("AllowReactApp",
        policy =>
        {
            policy.WithOrigins("http://localhost:5173")  // Разрешаем доступ с этого адреса
                .AllowAnyHeader()                       // Разрешаем любые заголовки
                .AllowAnyMethod();                      // Разрешаем любые HTTP-методы
        });
});
```

В этом примере создается политика CORS с именем `AllowReactApp`, которая разрешает доступ только с источника `http://localhost:5173` (например, фронтенд-приложение, работающее на этом порту). Политика позволяет все заголовки и методы.

### Применение политики CORS

После того, как политика CORS добавлена в контейнер зависимостей, необходимо применить ее в пайплайне обработки запросов. Это делается с помощью вызова `UseCors` в методе `Configure`:

``` csharp
app.UseCors("AllowReactApp");
```

Таким образом, все входящие запросы, которые приходят с разрешенных источников, будут обрабатываться согласно указанной политике CORS.

### Примечания:

- Вы можете настроить CORS для нескольких источников, добавляя их в `WithOrigins()`.
- Можно также настроить разрешение на определенные HTTP-методы (например, `.AllowGet()`, `.AllowPost()`) и заголовки с помощью `.WithHeaders()`.

Теперь ваше приложение настроено для работы с CORS и может принимать запросы от доверенных источников.