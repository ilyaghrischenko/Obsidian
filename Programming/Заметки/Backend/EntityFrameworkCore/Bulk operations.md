
## **–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ**


Bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ **Entity Framework Core 7+** –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–∞—Å—Å–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö **–±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ –ø–∞–º—è—Ç—å**.
  

–î–æ –ø–æ—è–≤–ª–µ–Ω–∏—è —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ —Å—Ç—Ä–æ–∫ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å:

1. –ó–∞–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≤ –ø–∞–º—è—Ç—å.
    
2. –ò–∑–º–µ–Ω—è—Ç—å –∏—Ö.
    
3. –°–æ—Ö—Ä–∞–Ω—è—Ç—å —á–µ—Ä–µ–∑ SaveChanges().
    


–≠—Ç–æ –±—ã–ª–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –¢–µ–ø–µ—Ä—å EF Core –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SQL –Ω–∞–ø—Ä—è–º—É—é.


## **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**

### **1.¬†ExecuteUpdate**

–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ LINQ-–∑–∞–ø—Ä–æ—Å—É.

``` csharp
await context.Customers
    .Where(c => c.IsActive == false)
    .ExecuteUpdateAsync(setters => setters
        .SetProperty(c => c.IsActive, true)
        .SetProperty(c => c.UpdatedDate, DateTime.UtcNow));
```

üëâ SQL, –∫–æ—Ç–æ—Ä—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç EF Core:

``` csharp
UPDATE [Customers]
SET [IsActive] = 1, [UpdatedDate] = GETUTCDATE()
WHERE [IsActive] = 0;
```

- SetProperty ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –æ–±–Ω–æ–≤–∏—Ç—å.
    
- –ú–æ–∂–Ω–æ —Ü–µ–ø–æ—á–∫–æ–π –∑–∞–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–≤–æ–π—Å—Ç–≤.
    
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **–ø—Ä–æ—Å—Ç—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏**, –Ω–µ–ª—å–∑—è –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–ª–æ–∂–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
    

  

### **2.¬†ExecuteDelete**

–ü–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏ –Ω–∞–ø—Ä—è–º—É—é.

``` csharp
await context.Orders
    .Where(o => o.Status == OrderStatus.Cancelled)
    .ExecuteDeleteAsync();
```

üëâ SQL:

``` sql
DELETE FROM [Orders]
WHERE [Status] = 'Cancelled';
```

- –£–¥–∞–ª—è–µ—Ç —Å—Ç—Ä–æ–∫–∏ **–±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø–∞–º—è—Ç—å**.
    
- –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç **—Å–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ EF** (–Ω–∞–ø—Ä–∏–º–µ—Ä, OnDelete, SaveChanges, ChangeTracker).
    

## **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**

‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ç–æ–∏—Ç, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:

- –ú–∞—Å—Å–æ–≤–æ –æ–±–Ω–æ–≤–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫–∏.
    
- –ò–∑–±–µ–∂–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç—å.
    
- –£—Å–∫–æ—Ä–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤.
    

‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –µ—Å–ª–∏:

- –ù—É–∂–Ω—ã **—Å–æ–±—ã—Ç–∏—è EF (hooks, triggers –≤ –∫–æ–¥–µ)**.
    
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏.
    

## **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

- **Change Tracker** –Ω–µ –∑–Ω–∞–µ—Ç –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö ‚Üí –µ—Å–ª–∏ –≤ –ø–∞–º—è—Ç–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å—É—â–Ω–æ—Å—Ç–∏, –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ **–±—É–¥–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–º**.
    
- –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞**.
    
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **–ø—Ä–æ—Å—Ç—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, c => true, o => o.Price * 0.9).
    

  

## **–ü—Ä–∏–º–µ—Ä: –º–∞—Å—Å–æ–≤–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ü–µ–Ω**

``` csharp
await context.Products
    .Where(p => p.Category == "Electronics")
    .ExecuteUpdateAsync(setters => setters
        .SetProperty(p => p.Price, p => p.Price * 1.1));
```

üëâ SQL:

``` sql
UPDATE [Products]
SET [Price] = [Price] * 1.1
WHERE [Category] = 'Electronics';
```

## **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º –ø–æ–¥—Ö–æ–¥–æ–º**

  

### **–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–¥–æ—Ä–æ–≥–æ):**

``` csharp
var customers = await context.Customers.Where(c => !c.IsActive).ToListAsync();
foreach (var customer in customers)
{
    customer.IsActive = true;
    customer.UpdatedDate = DateTime.UtcNow;
}
await context.SaveChangesAsync();
```

### **–ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ):**

``` csharp
await context.Customers
    .Where(c => !c.IsActive)
    .ExecuteUpdateAsync(setters => setters
        .SetProperty(c => c.IsActive, true)
        .SetProperty(c => c.UpdatedDate, DateTime.UtcNow));
```

## **–í—ã–≤–æ–¥**

- ExecuteUpdate –∏ ExecuteDelete ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è **–º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î**.
    
- –û–Ω–∏ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç ChangeTracker**, –ø–æ—ç—Ç–æ–º—É –±—ã—Å—Ç—Ä—ã–µ, –Ω–æ –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä—è—Ç EF-—Ö—É–∫–∏.
    
- –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è batch-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏ batch-—É–¥–∞–ª–µ–Ω–∏–π.
    
- –ù—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –æ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –±–∞–∑–æ–π –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ –ø–∞–º—è—Ç–∏.